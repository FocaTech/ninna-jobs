{% extends 'base.html' %}
{% load static %}
{% block title %}NinnaJobs - Admin{% endblock %}
{% block head %}

<script src="{% static 'node_modules/chart.js/dist/chart.js' %}" defer></script>
<script src="{% static 'js/bootstrap.bundle.min.js' %}" defer></script>
<script src="{% static 'js/jquery-3.5.1.js' %}" defer></script>
<script src="{% static 'js/jquery.dataTables.min.js' %}" defer></script>
<script src="{% static 'js/dataTables.bootstrap5.min.js' %}" defer></script>
<script src="{% static 'js/charts.js' %}" defer></script>

<link rel="stylesheet" href="{% static 'css/bootstrap.min.css' %}"/>
<link rel="stylesheet" href="{% static 'css/dataTables.bootstrap5.min.css' %}" />
<link rel="stylesheet" href="{% static 'css/dashboard.css' %}">
<link rel="stylesheet" href="{% static 'css/admin.css' %}"/>
{% endblock %}
{% block body_class %}page-dashboard{% endblock %}
{% block content %}
<main class="row">
   {% include 'partials/sidebar/admin.html' %}
    <div class="col-8">
        <h2 class="text-center m-3">Vagas Adicionadas</h2>
        <div class="botoes">
            <button type="button" class="btn btn-primary m-3" data-bs-toggle="modal" data-bs-target="#cadastro-de-vaga"><i class="bi bi-plus-lg"></i> Cadastrar vaga</button>
            <button type="button" class="btn btn-primary" id="botaoExluir"><i class="bi bi-trash"></i> Excluir Vaga</button>
        </div>
        <div class="container">
            <form method='GET' action="{% url 'bash' %}" class="filtros my-4">
                <div class="input-group">
                    <input placeholder="Pesquisar" type="search" class="form-control">
                    <span class="input-group-text"><i class="bi bi-search"></i>
                    </span>
                </div>
            </form>
            <div class="row row-cols-1 row-cols-md-3 g-3 py-2 px-1">
                {% if vagas %}
                {% for vaga in vagas %}
                    <div class="col">
                        <div class="card h-100 vaga">
                            <img src="{{ vaga.logo_empresa.url }}" class="card-img-top outline ar-2/1 mt-3" alt="">
                            <div class="card-body d-flex flex-column">
                                <h5 class="card-title">{{ vaga.nome_vaga }}</h5>
                                <ul class="hide-bullets">
                                    <li>
                                        <ul class="inline-list">
                                            <li><i class="bi bi-building" title="Empresa"></i> {{ vaga.nome_empresa }}</li>
                                            <li><i class="bi bi-geo-alt" title="Local"></i> {{ vaga.local_empresa }}</li>
                                        </ul>
                                    </li>
                                    <li>
                                        <ul class="inline-list">
                                            <li><i class="bi bi-file-earmark-text" title="Tipo de contrato"></i> {{ vaga.tipo_contratacao }}</li>
                                            <li><i class="bi bi-person-workspace" title="Tipo de trabalho"></i> {{ vaga.tipo_trabalho }} </li>
                                        </ul>
                                    </li>
                                </ul>
                                <button type="button" class="btn btn-primary align-self-start mt-auto" data-bs-toggle="modal" data-bs-target="[data-modal-id='{{ vaga.nome_vaga }} @ {{ vaga.nome_empresa }}']">
                                    Detalhes
                                </button>
                            </div>
                        {% include 'partials/modal-vaga.html' %}
                    </div>
                </div>
                {% endfor %}
                {% endif %}
            </div>
            </div>
    </div>
</main>
<!--Modal cadastrar vagas-->
<div class="modal fade" id="cadastro-de-vaga" tabindex="-1" aria-labelledby="cadastro-de-vaga-label" aria-hidden="true">
    <div class="modal-dialog modal-lg">
    <div class="modal-content">
        <div class="modal-header">
            <h5 class="modal-title" id="cadastro-de-vaga-label">Cadastrar vaga</h5>
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body p-4">

        <form action="{% url 'select' %}" method="post" enctype="multipart/form-data">
            {% csrf_token %}
            <div class="mb-2">
                <label class="form-label">Logo da Empresa</label>
                <input class="p-1" type="file" accept="image/*" name="logo_empresa">
            </div>
            <div class="col">
                <label class="form-label" for="empresa">Empresa</label>
                <select class="form-select" name="empresa">
                    <option value="Pague menos">pague menos</option>
                </select>
            </div>
            <div class="row g-3 align-items-center mb-2">
                <div class="col">
                    <label class="form-label">Nome da Vaga</label>
                    <input class="form-control" type="text" name="nome_vaga">
                </div>
            </div>
            <div class="row g-3 align-items-center mb-2">
                <div class="col">
                    <label class="form-label">Local da Empresa</label>
                    <input class="form-control" type="text" name="local">
                </div>
                <div class="col">
                    <label class="form-label" for="contratacao">Tipo de Contratacao</label>
                    <select class="form-select" name="tipo_contratacao">
                        {% for contratacao in contratacoes%}
                        <option value="{{contratacao.contratacao}}">{{contratacao.contratacao}}</option>
                        {% endfor %}
                    </select>
                </div>
            </div>
            <div class="row g-3 align-items-center mb-2">
                <div class="col">
                    <label class="form-label" for="perfil">Perfil do Profissional</label>
                    <select class="form-select" name="perfil">
                        {% for perfil in perfis%}
                        <option value="{{perfil.contratacao}}">{{perfil.contratacao}}</option>
                        {% endfor %}
                    </select>
                </div>
                <div class="col">
                    <label class="form-label">Salário</label>
                    <input class="form-control" type="number" name="salario">
                </div>
            </div>
            <div class="mb-2">
                <label class="form-label">Descrição da Vaga</label>
                <textarea class="form-control" name="descricao_vaga"></textarea>
            </div>
            <div class="mb-2">
                <label class="form-label">Descrição da Empresa</label>
                <textarea class="form-control" name="descricao_empresa"></textarea>
            </div>
            <div class="row g-3 align-items-center mb-2">
                <div class="col">
                    <label class="form-label">Área de Atuação</label>
                    <input class="form-control" type="text" name="area_atuacao">
                </div>
                <div class="col">
                    <label class="form-label" for="tipotrabalho">Tipo de trabalho</label>
                    <select class="form-select" name="tipo_trabalho">
                        {% for trabalho in trabalhos%}
                        <option value="{{trabalho.trabalho}}">{{trabalho.trabalho}}</option>
                        {% endfor %}
                    </select>
                </div>
            </div>
            <div class="mb-2">
                <label class="form-label">Principais Atividades</label>
                <input class="form-control" type="text" name="principais_atividades">
            </div>
            <div class="mb-2">
                <label class="form-label">Requisitos</label>
                <textarea class="form-control" type="text" name="requisitos"></textarea>
            </div>
            <div class="mb-2">
                <label class="form-label">Diferencial</label>
                <input class="form-control" type="text" name="diferencial">
            </div>
            <div class="mb-2">
                <label class="form-label">Beneficios</label>
                <textarea class="form-control" name="beneficios"></textarea>
            </div>

            <button type="submit" name="submit" class="btn btn-primary">Salvar</button>
        </form>

        </div>
        <div class="modal-footer">
            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Descartar</button>
        </div>
        </div>
</div>
</div>
{% endblock %}
